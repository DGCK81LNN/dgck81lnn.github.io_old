<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<link rel="stylesheet" type="text/css" href="/css3/basic.css">
<link rel="stylesheet" type="text/css" href="/css3/night.css">
<title>灵魂小站临时测试站点</title>
</head>
<body>
<h1>灵魂小站临时测试站点</h1>
<p>本测试站点使用GitHub Pages，不能使用PHP。因此一些功能用Javascript代替。</p>
<ol id="list" class="soulbox">
加载内容……
</ol>
<script>
let xhr=new XMLHttpRequest();
xhr.open("get", "/tests.json");
xhr.addEventListener("load", () => {
  let result = xhr.responseText;
  let list = document.getElementById("list");
  let arr;
  try {
    arr = JSON.parse(result);
  }
  catch(err) {
    list.innerText = "解析JSON失败：" + err.message;
    return;
  }
  if(!(arr instanceof Array && arr.length)){
    list.innerText = "测试站点没有内容……";
    return;
  }
  list.innerHTML = "";
  arr.forEach(obj => {
    let item = document.createElement("li");
    let anchor = document.createElement("a");
    if(obj.href) anchor.href = obj.href;
    anchor.innerText = obj.title;
    item.appendChild(anchor);
    list.appendChild(item);
  });
});
xhr.send();
</script>
</body>
</html>

